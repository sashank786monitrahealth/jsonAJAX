<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>JSON Exercise</title>
</head>
<body>
    <h1>Task List:</h1>
    <div id="output">
    
     <ul id="taskList">

     </ul>

    </div>


    <script type ="text/javascript">
       var data = `
       [
  {"info":"Cut Grass", "status":false},
  {"info":"Clean Room", "status":false},
  {"info":"Go to Gym", "status":false},
  {"info":"Make Dinner", "status":false}
]
       `;
      //console.log(data);

      
       var dataJSON = JSON.parse(data);

      console.log(dataJSON);

      var output = document.getElementById('output');
      var taskList = document.querySelector('#taskList');

      for(var key in dataJSON){
          console.log(key, dataJSON[key]);
          var status = dataJSON[key].status ? ' checked':'';
          var html = '<li>'+dataJSON[key].info+'<input type="checkbox" value="'+key+'"'+status+'> </li>';

          taskList.innerHTML += html;
      }
     
      addEvents();

      // this function will add events 
      function addEvents(){
          var checkBoxes = document.querySelectorAll('#taskList input[type="checkbox"]');

          for(var index in checkBoxes){
             // console.log("index",index);
              checkBoxes[index].onchange = updateJSON;
          }
          //console.log(checkBoxes);
      }

function updateJSON(){
    var key = event.target.value;
    console.log(key, event.target.checked)
    dataJSON.tasks[key] = event.target.checked;
}



/*
     function updateJSON(){
         var key = event.target.value;
         console.log(key, event.target.checked);
         dataJSON.tasks[key] = event.target.checked;
     }

*/

   
    </script>
</body>
</html>


